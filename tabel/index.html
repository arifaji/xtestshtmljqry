<html>
    <head>
        <title>JS</title>
    </head>

    <body>
        <h1>Hello :)</h1>
        Nama Barang :        
        <select  name="barang" id="barang">
            <option value="indomie">indomie</option>
            <option value="kopi">kopi</option>
            <option value="frisian flag">frisian flag</option>
            <option value="teh">teh</option>
        </select>

        Jumlah :
        <input type="number"  id="jumlah"><br><br>
        Harga :
        <input type="number"  id="harga">
        <button type="button" onclick="insertRow()">Add Row</button>
        <button type="button" onclick="deleteFc()">Delete Row</button>
        <button type="button" onclick="refresh()">Refresh</button>
        <br><br>
        <table id="tableMain" border="1">
            <thead id="tableHead">
                <tr>
                    <td>No </td>
                    <td>Nama Barang </td>
                    <td>Jumlah </td>
                    <td>Harga </td>
                    <td>Jumlah Harga </td>
                    <td>Aksi </td>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
            <tfoot id="semuanya">
            </tfoot>
        </table>

        <script>
            function insertRow(){
                var x = document.getElementById("tableMain");
                var y = x.rows.length-1;
               
                var last = x.rows[y-1];

                var table = document.getElementById("tableBody");
                var row = table.insertRow();

                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                var cell5 = row.insertCell(4);
                var cell6 = row.insertCell(5);
 
 

                var akhir = 0;
                if(y > 1) {
                    akhir = parseInt(last.cells[0].innerHTML)
                }

                cell1.innerHTML = akhir+1;
                cell2.innerHTML = document.getElementById('barang').value;
                cell3.innerHTML = document.getElementById('jumlah').value;
                cell4.innerHTML = document.getElementById('harga').value;
                cell5.innerHTML = (document.getElementById('jumlah').value*document.getElementById('harga').value);
                cell6.innerHTML = '<button onclick="deleteFkRow()" >Delete</button>';
                    var txharga = 0;
                    for (i=0; i < table.rows.length ; i++){
                        txharga = txharga + parseInt(table.rows[i].cells[3].innerHTML);
                    }

                    var ttharga = 0;
                    for (i=0; i < table.rows.length ; i++) {
                        ttharga = ttharga + parseInt(table.rows[i].cells[3].innerHTML)*parseInt(table.rows[i].cells[2].innerHTML);
                    }
                    semuanya.innerHTML="<td colspan='3'>  </td><td> Total Harga </td> <td colspan='2'>"+ttharga+"</td>"
                
            }
            function deleteFkRow(){
                var td = event.target.parentNode;
                var tr =td.parentNode;
                tr.parentNode.removeChild(tr)
                refresh();
            }
            function refresh(){
                var table = document.getElementById("tableBody");
                var txharga = 0;
                    for (i=0; i < table.rows.length ; i++){
                        txharga = txharga + parseInt(table.rows[i].cells[3].innerHTML);
                    }

                    var ttharga = 0;
                    for (i=0; i < table.rows.length ; i++) {
                        ttharga = ttharga + parseInt(table.rows[i].cells[3].innerHTML)*parseInt(table.rows[i].cells[2].innerHTML);
                    }
                    semuanya.innerHTML="<td colspan='3'>  </td><td> Total Harga </td> <td colspan='2'>"+ttharga+"</td>"
                
            }

            function deleteFc(){
                var x = document.getElementById("tableBody").rows.length;
                var table = document.getElementById("tableBody");
                
                table.deleteRow(x-1);

            }
            
        </script>
       
    </body>
</html>